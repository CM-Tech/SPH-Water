import{G as t}from"./vendor.34f1e898.js";!function(t=".",i="__import__"){try{self[i]=new Function("u","return import(u)")}catch(e){const s=new URL(t,location),n=t=>{URL.revokeObjectURL(t.src),t.remove()};self[i]=t=>new Promise(((e,r)=>{const a=new URL(t,s);if(self[i].moduleMap[a])return e(self[i].moduleMap[a]);const h=new Blob([`import * as m from '${a}';`,`${i}.moduleMap['${a}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(h),onerror(){r(new Error(`Failed to import: ${t}`)),n(o)},onload(){e(self[i].moduleMap[a]),n(o)}});document.head.appendChild(o)})),self[i].moduleMap={}}}("assets/");let i={x:0,y:0,down:!1};const e=document.getElementById("canvas"),s=e.getContext("2d");e.addEventListener("mousedown",(t=>{i.down=!0})),e.addEventListener("mousemove",(t=>{i.x=t.clientX,i.y=t.clientY}));var n=window.innerWidth,r=window.innerHeight;const a=()=>{n=window.innerWidth,r=window.innerHeight,e.width=n,e.height=r};window.addEventListener("resize",a);const h=new class{constructor(){this.GRAVITY=.125,this.RANGE=25,this.PRESSURE=1,this.VISCOSITY=.05}},o=new t;o.add(h,"VISCOSITY").name("viscosity").max(.5).min(0).step(.025),o.add(h,"GRAVITY").name("gravity").max(1).min(-1).step(.125),a();var c=h.RANGE*h.RANGE,y=1/(n/20),l=1/(r/10),d=[],f=0,x=[],v=0,g=0,u=[],w=0;function m(t,i){for(var e=0;e<i.numParticles;e++){var s=i.particles[e];if(t!=s)(t.x-s.x)*(t.x-s.x)+(t.y-s.y)*(t.y-s.y)<c&&(x.length==v&&(x[v]=new R),x[v++].setParticle(t,s))}}class p{constructor(t,i){this.x=t,this.y=i,this.gx=0,this.gy=0,this.vx=0,this.vy=0,this.fx=0,this.fy=0,this.density=0,this.pressure=0,this.color=.6}move(){this.vy+=h.GRAVITY,this.vx+=this.fx,this.vy+=this.fy,this.x+=this.vx,this.y+=this.vy,this.x<10&&(this.vx+=.5*(10-this.x)-.5*this.vx),this.y<10&&(this.vy+=.5*(10-this.y)-.5*this.vy),this.x>n&&(this.vx+=.5*(n-this.x)-.5*this.vx),this.y>r&&(this.vy+=.5*(r-this.y)-.5*this.vy)}}class R{constructor(){this.distance=0,this.nx=0,this.ny=0,this.weight=0}setParticle(t,i){this.p1=t,this.p2=i,this.nx=t.x-i.x,this.ny=t.y-i.y,this.distance=Math.sqrt(this.nx*this.nx+this.ny*this.ny),this.weight=1-this.distance/h.RANGE;var e=this.weight*this.weight*this.weight;t.density+=e,i.density+=e,e=1/this.distance,this.nx*=e,this.ny*=e}calcForce(){if(!this.p1||!this.p2)return;let{p1:t,p2:i}=this;var e=this.weight*(t.pressure+i.pressure)/(t.density+i.density)*h.PRESSURE,s=this.weight/(t.density+i.density)*h.VISCOSITY;t.fx+=this.nx*e,t.fy+=this.ny*e,i.fx-=this.nx*e,i.fy-=this.ny*e;var n=i.vx-t.vx,r=i.vy-t.vy;t.fx+=n*s,t.fy+=r*s,i.fx-=n*s,i.fy-=r*s}}class b{constructor(){this.particles=[],this.numParticles=0}clear(){this.numParticles=0,this.particles=[]}add(t){this.particles[this.numParticles++]=t}}function E(t,i,e){var s,n,r,a,h,o,c,y;switch(1===arguments.length&&(i=t.s,e=t.v,t=t.h),o=e*(1-i),c=e*(1-(h=6*t-(a=Math.floor(6*t)))*i),y=e*(1-(1-h)*i),a%6){case 0:s=e,n=y,r=o;break;case 1:s=c,n=e,r=o;break;case 2:s=o,n=e,r=y;break;case 3:s=o,n=c,r=e;break;case 4:s=y,n=o,r=e;break;case 5:s=e,n=o,r=c}return{r:Math.round(255*s),g:Math.round(255*n),b:Math.round(255*r)}}for(var I=0;I<20;I++){u[I]=new Array(10);for(var M=0;M<10;M++)u[I][M]=new b}e.addEventListener("mouseup",(function(t){i.down=!1}),!1),window.setInterval((function(t){i.down&&function(){if(g%5==0){var t=new p(i.x,i.y);t.vy=0,d[f++]=t}}();var e=w+0;w=0,function(t){g++;for(var i=0;i<f;i++)for(var e=d[i],s=0;s<t;s++)e.move()}(e),s.clearRect(0,0,n,r),function(){s.fillStyle="blue",s.strokeStyle="blue";for(var t=0;t<f;t++){var i=d[t];s.fillStyle="white",s.beginPath(),s.arc(i.x,i.y,16,0,2*Math.PI,!1),s.fill()}for(t=0;t<f;t++){i=d[t];s.fillStyle="blue",s.beginPath(),s.arc(i.x,i.y,14,0,2*Math.PI,!1);var e=E(i.color,1,1.5-Math.sqrt(2*i.density));s.fillStyle="rgba("+e.r+","+e.g+","+e.b+",01)",s.fill()}}(),s.font="30px Arial"}),.01),window.setInterval((function(){w++}),.1),window.setInterval((function(){!function(){var t,i;for(t=0;t<20;t++)for(i=0;i<10;i++)u[t][i].clear();for(t=0;t<f;t++){var e=d[t];e.fx=e.fy=e.density=0,e.gx=Math.floor(e.x*y),e.gy=Math.floor(e.y*l),e.gx<0&&(e.gx=0),e.gy<0&&(e.gy=0),e.gx>19&&(e.gx=19),e.gy>9&&(e.gy=9),u[e.gx][e.gy].add(e)}}(),function(){v=0;for(var t=0;t<f;t++){var i=d[t],e=0!=i.gx,s=19!=i.gx,n=0!=i.gy,r=9!=i.gy;m(i,u[i.gx][i.gy]),e&&m(i,u[i.gx-1][i.gy]),s&&m(i,u[i.gx+1][i.gy]),n&&m(i,u[i.gx][i.gy-1]),r&&m(i,u[i.gx][i.gy+1]),e&&n&&m(i,u[i.gx-1][i.gy-1]),e&&r&&m(i,u[i.gx-1][i.gy+1]),s&&n&&m(i,u[i.gx+1][i.gy-1]),s&&r&&m(i,u[i.gx+1][i.gy+1])}}(),function(){for(var t=0;t<f;t++){var i=d[t];i.density<.2&&(i.density=.2),i.pressure=i.density-.2}}(),function(){for(var t=0;t<v;t++){x[t].calcForce()}}()}),1);
